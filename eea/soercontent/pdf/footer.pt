<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  lang="en"
  i18n:domain="eea">
<head>
    <metal:styles metal:use-macro="context/@@pdf.macros/styles"></metal:styles>
</head>
<body tal:define="
plone_view nocall:context/@@plone;
body_class python:plone_view.bodyClass(template, view);
page python:request.get('page') or 1;
total_pages python: request.get('topage') or 1;
last_page python:page == total_pages;"
        tal:attributes="class python: body_class + ' body-print' if not last_page else body_class + ' body-print last-page'">
<div id="region-content">
        <div class="pdf-fiche-header"
                tal:define="page_class python: 'pdf-fiche-page page ';
                            even_page python: int(page) % 2 == 0;
                            page_number_class python: page_class + 'pull-left' if even_page else page_class + 'pull-right'">

            <div class="qrbox" tal:condition="python:page == total_pages" tal:content="structure context/qrbox"></div>
            <h5 tal:attributes="class python:'pdf-fiche-breadcrumbs pull-left' if not even_page else 'pdf-fiche-breadcrumbs pull-right'" tal:define="breadcrumbs view/breadcrumbs;">
                <span tal:content="structure python:' &gt; '.join(breadcrumbs)" />
            </h5>
            <p tal:attributes="class page_number_class;"></p>
        </div>

        <script type="text/javascript">
            function subst() {
                var vars={};
                var x=document.location.search.substring(1).split('&');
                for(var i in x) {
                    var z=x[i].split('=',2);vars[z[0]] = unescape(z[1]);
                }
                var x=['frompage','topage','page','webpage','section','subsection','subsubsection'];
                for(var i in x) {
                    var y = document.getElementsByClassName(x[i]);
                    for(var j=0; j<y.length; ++j) y[j].textContent = vars[x[i]];
                }
            };

            subst();
        </script>
</div>
</body>
</html>
